/*
....................................................................................................
....                                                                                               .
....                                                                                               .
....                                         .                                                     .
....                                   .........................                                   .
....                           .....   ......::=***===+=-:......                                   .
....                        .............=######%#####=-:...........                               .
....                        ....:=-...:*+==+#######*#####--=++*-....                               .
....                    ......-*####++-..:+###%*=--:.####*--*####+:...........                     .
....                    ..:+*##########*-.-=:..::....*###*:..:*####*+*:.......                     .
....               ......-**####*-*#####*=...........*###*:.*#####*####*+-......                   .
....               .....*#####*:....-####=... ....:+####*:.+###:...+#*-*##+.....                   .
....             ....:###*##%*..   ...####=.....:######*:..:###...:*##:.+##%%-....                 .
....             ...::-:-==#*-..   ..=%##*-..:*####%*#:.....+#%#%%%%#*...:+###+:..                 .
....          .......=-...=*-...   ..-####==######*=..........+##**+......:+####-....              .
....          ...-..............   ..-%#%##%###==:..:-+*#%%%%%%###+-:.. ...:*####+:..              .
....          ..-*.:-.=#+*#+++:......*#######*-..:*##################%*=:.....+###=....            .
....          ..#-=##*#%#########=..:#######-....:=###################%###+:..:+##*+...            .
....      .....+#######+-+++#####%#=:#####%=..   ..:########################*:.:+##*.....          .
....      ....+#####*-......:-*###%#####%#=...   ...+######*##%#=..:*#########*:.-*#%:...          .
....      ...==%###*-..     ....+##########=........+##%##-....::....-%##*##%###=.=##=+..          .
....      ...-#####=..  .   .....:##########+:.....+#%#%##*-.....+##+..=...+#%%##=:####..          .
....      ...=##*#*=:........:-:..+##########%####%###%#-......:+%##%##:....*####%+-###-.          .
....      ..:##.++#+:.....:*#%##-.-*################%#######*-=%########+...:%####%=:##=.          .
....      ...==:+:++-...-*#%####*..:*####################################*:..*######:-#+.          .
....      ...=++.........:+######:..:+####################################*:.=%%####*.++.          .
....      ...-*%:...........:+%##+....+####################################+....-*##%::+.          .
....      ...-##:.:--*#-=+:...-%##=....:*%################################%#=....=##%-.:.          .
....      ....*%=:*#%%%####+:.:%###+:.....-#%################################....=###=...          .
....      ...:*%#=#=.....+##*-*#*:*%#+....:*%#######%###############%#*######=...+###=...          .
....      .....###*:.....:+#*-#+...-####*::*###%#*+##################*.:#####*..-###%-...          .
....         ..*%#=.......+#*=.......:*#########+.+#################=+.:*#####..+###%....          .
....          ..=%#+:...:+##-...   ......=*####*..+##################=.:######...+##*....          .
....          ..+####%##%*-=......:--.......+#+...-*#######*=#######::.=%####*...-##:...           .
....          ...=#*-..+-....  ..-=*#*.....::......-*#####=.:#######*...-*###=...=#=...            .
....          ...-*#*:....... ..:=#####=............=#####-.=######++...-####...-#+..              .
....          ....:=##=...    ..+######%#*=:....:=+*######=.+######=...=##%%=..-*+...              .
....          . ...:+##*:.......:::.::*%#####%%%%#####%##*:-#######-.:####%+..-#=....              .
....             ....:=##=.............-#*:.............::.+#####=::######+..*#:....               .
....               ...:####=........ ..-##=...   ........+######+...:%###=.-#-...                  .
....               ......-*###=:.......:+:............:=#%###%-.....:%#*::+:......                 .
....                    ...-+*###*-:..............:-=######=+:...:-+##-.:.....                     .
....                    .....-+#######*++====+*######%**#+:..+**###*-........                      .
....                        .....:*###%######%###*+#*=.....:*###*=:....                            .
....                        ...........:===:.-+=-......:=+###+-:.....                              .
....                           .............:-+***####*+=-:.........                               .
....                                      ......................                                   .
....                                                 ....                                          .
....                                                                                               .
....                                                                                               .
....                                                                                               .
....................................................................................................
                     WhEN In DoUBt,  (╯°□°）╯︵ ┻━┻ ....ReComPiLe.
*/


/*
  author:  -----          
  created: 16 16:07:21    
*/



// g++ -std=c++17 new.cpp -o new
// ./new
//g++ -std=c++17 -Wall -Wextra -O2 s.cpp -o file-name 
//./file-name
#undef _GLIBCXX_DEBUG
#include <bits/stdc++.h>
using namespace std;

#ifdef LOCAL
#include "algo/debug.h"
#else
#define debug(...) 42
#endif

#define vi vector<int>
#define pb push_back

void solve(){
   //soLuSHoNN hErE.........
   int n, m, k;
   cin >> n >> m >> k;
   
   vi a(n + 1);

   for (int i = 1; i <= n; i++) cin >> a[i];

    vector<vi> g(n + 1);
    for (int i = 0; i < m; i++) {
        int u, v;
        cin >> u >> v;
        g[u].pb(v);
        g[v].pb(u);
    }

    vi dist(n + 1, -1);
    queue<int> q;
    
    dist[1] = 0;
    q.push(1);

    while (!q.empty()) {
        int u = q.front(); q.pop();
        for (int v : g[u]) {
            if (dist[v] == -1) {
                dist[v] = dist[u] + 1;
                q.push(v);
            }
        }
    }

    vi ans(k + 1, 0);
    for (int i = 1; i <= n; i++) {
        ans[a[i]] = max(ans[a[i]], dist[i]);
    }

    for (int i = 1; i <= k; i++) {
        cout << ans[i] << (i == k ? '\n' : ' ');
    }
}

int main(){
    //freopen("in.txt","r",stdin);
    ios_base::sync_with_stdio(false);
    cin.tie(0); cout.tie(0);
    int t(1), tcase(0); //cin>>t;
    while (++tcase, t--) solve();
}